/**
 * OpenGNOP! - v0.1.0
 * Copyright (c) 2014, Steve Richey
 *
 * Compiled: 2014-04-10
 *
 * OpenGNOP! is licensed under the MIT License.
 * 
 */(function(){function a(a,b,c,d,e){Window.call(this,a,b,c,d,e)}function b(a,b){PIXI.Graphics.call(this),this.position.x=a,this.position.y=b,this.beginFill(16777215),this.lineStyle(1,0),this.drawRect(this.position.x,this.position.y,10,10),this.endFill()}var c=this,d=d||{};d.FORCE_SCALING_ON=0,d.FORCE_SCALING_OFF=1,d.ALLOW_SCALING_ON=2,d.ALLOW_SCALING_OFF=3,d.VERSION_NUMBER="1.0",console.log("hey"),d.Main=function(){this.gameCanvas=document.getElementById("game-canvas"),this.width=640,this.height=480,this.bgColor=16777215,this.forceScaling=!1,this.allowScaling=!0,this.forceCanvas=!1},d.Main.preload=function(){this.loader=new PIXI.AssetLoader(["images/chicago.xml"]),this.loader.onAssetLoaded=this.init,this.loader.load()},d.Main.init=function(){this.stage=new PIXI.Stage(this.bgColor,!0),this.stage.interactive=!0,this.renderer=this.forceCanvas?new PIXI.CanvasRenderer(this.width,this.height):new PIXI.autoDetectRenderer(this.width,this.height),this.renderer.view.style.position="fixed",this.renderer.view.style.width=this.width+"px",this.renderer.view.style.height=this.height+"px",this.renderer.view.style.display="block",window.onresize(),document.body.appendChild(this.renderer.view),this.desktop=new Desktop(this.stage),window.requestAnimFrame(this.update)},d.Main.update=function(){this.desktop.update(),this.renderer.render(this.stage),window.requestAnimFrame(this.update)},d.Main.onResize=function(){this.renderer&&((window.innerWidth<this.width||this.forceScaling)&&this.allowScaling?(this.renderer.view.style.width=window.innerWidth+"px",this.renderer.view.style.left="0px"):(this.renderer.view.style.width=this.width+"px",this.renderer.view.style.left=(window.innerWidth-this.width)/2+"px"),(window.innerHeight<this.height||this.forceScaling)&&this.allowScaling?(this.renderer.view.style.height=window.innerHeight+"px",this.renderer.view.style.top="0px"):(this.renderer.view.style.height=this.height+"px",this.renderer.view.style.top=(window.innerHeight-this.height)/2+"px"))},window.onload=d.Main.preload,window.onresize=d.Main.onResize,d.Desktop.width=0,d.Desktop.height=0,d.Desktop=function(a){PIXI.Sprite.call(this,PIXI.Texture.fromImage("./images/bg.png")),this.icons=[],this.interactive=!0,this.stage=a,this.time=new d.Time,this.stage.addChild(this.time),this.self=this,d.Desktop.width=this.stage.width,d.Desktop.height=this.stage.height,this.addIcon("./images/icon_settings.png",580,420),this.mousedown=this.touchstart=this.clickAway},d.Desktop.prototype=Object.create(PIXI.Sprite.prototype),d.Desktop.prototype.constructor=d.Desktop,d.Desktop.prototype.clickAway=function(){for(var a=0;a<this.icons.length;a++)this.icons[a].setInverted(!1)},d.Desktop.prototype.addIcon=function(a,b,c){var e=new d.Icon(a,b,c,new d.Settings(70,95,500,310,this.stage));this.icons.push(e),this.stage.addChild(e)},d.Window=function(a,b,c,d){PIXI.Sprite.call(this,new PIXI.Texture.fromImage("")),this.position.x=a,this.position.y=b,this.windowWidth=c,this.windowHeight=d,this.windowType="bordered",this.texts=[]},d.Window.constructor=d.Window,d.Window.prototype=Object.create(PIXI.Sprite.prototype),d.Window.prototype.create=function(){},d.Window.prototype.destroy=function(){},d.Window.prototype.createWindow=function(){this.graphics=new PIXI.Graphics,"shadow"===this.windowType?(d.Window.fillRect(this.graphics,this.position.x+2,this.position.y+2,this.windowWidth-2,this.windowHeight-2,d.Colors.BLACK),d.Window.fillRect(this.graphics,this.position.x,this.position.y,this.windowWidth-2,this.windowHeight-2,d.Colors.BLACK),d.Window.fillRect(this.graphics,this.position.x+1,this.position.y+1,this.windowWidth-4,this.windowHeight-4,d.Colors.WHITE)):"menu"===this.windowType?(d.Window.fillRect(this.graphics,this.position.x+3,this.position.y+3,this.windowWidth-3,this.windowHeight-3,d.Colors.BLACK),d.Window.fillRect(this.graphics,this.position.x,this.position.y,this.windowWidth-1,this.windowHeight-1,d.Colors.BLACK),d.Window.fillRect(this.graphics,this.position.x+1,this.position.y+1,this.windowWidth-3,this.windowHeight-3,d.Colors.WHITE)):(d.Window.fillRect(this.graphics,this.position.x,this.position.y,this.windowWidth,this.windowHeight,d.Colors.BLACK),d.Window.fillRect(this.graphics,this.position.x,this.position.y,this.windowWidth,this.windowHeight,d.Colors.BLACK),d.Window.fillRect(this.graphics,this.position.x+1,this.position.y+1,this.windowWidth-2,this.windowHeight-2,d.Colors.BLUE_DARK),d.Window.fillRect(this.graphics,this.position.x+1,this.position.y+1,this.windowWidth-3,this.windowHeight-3,d.Colors.BLUE_LIGHT),d.Window.fillRect(this.graphics,this.position.x+2,this.position.y+2,this.windowWidth-4,this.windowHeight-4,d.Colors.GREY),d.Window.fillRect(this.graphics,this.position.x+3,this.position.y+3,this.windowWidth-6,this.windowHeight-6,d.Colors.BLUE_DARK),d.Window.fillRect(this.graphics,this.position.x+4,this.position.y+4,this.windowWidth-7,this.windowHeight-7,d.Colors.BLUE_LIGHT),d.Window.fillRect(this.graphics,this.position.x+4,this.position.y+4,this.windowWidth-8,this.windowHeight-8,d.Colors.BLACK),d.Window.fillRect(this.graphics,this.position.x+5,this.position.y+5,this.windowWidth-10,this.windowHeight-10,d.Colors.WHITE)),this.stage.addChild(this.graphics)},d.Window.prototype.addText=function(a,b,c){var d=new Text(a,b,c);return this.texts.push(d),this.stage.addChild(d),d},d.Window.prototype.addCheckbox=function(a,c,d){var e=this.addText(a,c,d),f=new b(e.x+e.textWidth+8,e.y);this.checkboxes.push(f),this.stage.addChild(f)},d.Window.fillRect=function(a,b,c,d,e,f){a.beginFill(f),a.drawRect(b,c,d,e),a.endFill()},d.Text=function(a,b,c){PIXI.BitmapText.call(this,a,{font:"12px Chicago"}),this.position.x=b,this.position.y=c},d.Text.constructor=d.Text,d.Text.prototype=Object.create(PIXI.BitmapText.prototype),d.Time.X_POSITION=571,d.Time.Y_POSITION=5,d.Time=function(){Text.call(this,"",d.Time.X_POSITION,d.Time.Y_POSITION),this.updateTime(),window.setInterval(this.updateTime,1e3)},d.Time.constructor=d.Time,d.Time.prototype=Object.create(d.Text.prototype),d.Time.prototype.updateTime=function(){this.date=new Date,this.hour=this.date.getHours(),this.minute=this.date.getMinutes(),this.zero="",this.ampm="AM",this.hour>12&&(this.hour-=12,this.ampm="PM"),0===this.hour&&(this.hour=12),this.minute<10&&(this.zero="0"),this.setText(this.hour+":"+this.zero+this.minute+" "+this.ampm),this.updateText(),this.position.x=d.Time.X_POSITION-this.textWidth},d.Icon.MIN_CLICK_TIME=750,d.Icon=function(a,b,c,e){PIXI.Sprite.call(this,PIXI.Texture.fromImage(a)),this.dragging=!1,this.offsetX=0,this.offsetY=0,this.inverted=!1,this.clickTime=-d.Icon.MIN_CLICK_TIME,this.invertFilter=new PIXI.InvertFilter,this.position.x=b,this.position.y=c,this.windowClass=e,this.interactive=!0,this.mousedown=this.touchstart=this.onClick,this.mousemove=this.touchmove=this.onMove,this.mouseup=this.touchend=this.mouseupoutside=this.touchendoutside=this.onRelease},d.Icon.prototype=Object.create(PIXI.Sprite.prototype),d.Icon.constructor=d.Icon,d.Icon.prototype.onClick=function(a){this.setInverted(!0),this.offsetX=a.global.x-this.position.x,this.offsetY=a.global.y-this.position.y,this.dragging=!0},d.Icon.prototype.onMove=function(a){this.dragging&&(this.position.x=a.global.x-this.offsetX,this.position.y=a.global.y-this.offsetY,this.position.y<20&&(this.position.y=20),this.position.x<0&&(this.position.x=0),this.position.x>d.Desktop.width-this.width&&(this.position.x=d.Desktop.width-this.width),this.position.y>d.Desktop.height-this.height&&(this.position.y=d.Desktop.height-this.height))},d.Icon.prototype.onRelease=function(){if(this.dragging){this.dragging=!1;var a=(new Date).getTime();a-this.clickTime<d.Icon.MIN_CLICK_TIME?this.windowClass.create():this.clickTime=a}},d.Icon.prototype.setInverted=function(a){a?(this.filters=[this.invertFilter],this.inverted=!0):(this.filters=null,this.inverted=!1)},a.constructor=a,a.prototype=Object.create(Window.prototype),a.prototype.create=function(){this.windowType="bordered",this.createWindow(),this.addText("OpenGNOP! Settings",this.position.x+16,this.position.y+16);this.addText("Nothing yet!",this.position.x+16,this.position.y+40)},d.Colors.BLACK=0,d.Colors.BLUE_LIGHT=13421823,d.Colors.GREY=12303291,d.Colors.BLUE_DARK=6710937,d.Colors.WHITE=16777215,b.constructor=b,b.prototype=Object.create(PIXI.Graphics.prototype),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.OS7=d):"undefined"!=typeof define&&define.amd?define(d):c.OS7=d}).call(this);